<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: formatters/date.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: formatters/date.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Date format library.
 *
 * @see http://google.github.io/styleguide/javascriptguide.xml
 * @see http://developers.google.com/closure/compiler/docs/js-for-compiler
 */

import {getMonthName, getMonthByName} from '../locale/index.js';

/**
 * Static number formats that do not require parsing of the input string.
 * @type {!Object&lt;string, function(!Date): number>}
 */
const NUMBER_FORMAT = {
  /**
   * @param {!Date} date The date to be formatted.
   * @return {number} Returns formatted date as number.
   */
  'YYYYMMdd': (date) => {
      return 1e4 * date.getFullYear() +
             1e2 * (date.getMonth() + 1) + date.getDate();
  },
  /**
   * @param {!Date} date The date to be formatted.
   * @return {number} Returns formatted date as number.
   */
  'YYYYMMddhhmm': (date) => {
      return 1e4 * NUMBER_FORMAT['YYYYMMdd'](date) +
             1e2 * date.getHours() + date.getMinutes();
  },
  /**
   * @param {!Date} date The date to be formatted.
   * @return {number} Returns formatted date as number.
   */
  'YYYYMMddhhmmss': (date) => {
      return 1e2 * NUMBER_FORMAT['YYYYMMddhhmm'](date) + date.getSeconds();
  }
};

/**
 * Formats given &lt;code>date&lt;/code> according to given &lt;code>format&lt;/code>.
 * @param {!Date} date The date to be formatted.
 * @param {string} format The date format.
 * @return {string} Returns formatted date as string.
 * @example
 * formatDate(new Date(), 'YYYY-MM-dd');
 * formatDate(new Date(), 'YYYY-MM-dd hh:mm');
 * formatDate(new Date(), 'dd MMM, YYYY');
 */
export const formatDate = (date, format) => {
  const fn = NUMBER_FORMAT[format];
  const pad = (num) => ('0' + num).slice(-2);

  if (fn) {
    format = '' + fn(date);
  } else {
    const month = getMonthName(date);
    const tokens = [
      'YYYY', date.getFullYear(),
      'YY', (date.getFullYear() + '').substr(2),
      'MMMM', month,
      'MMM', month.substr(0, 3),
      'MM', pad(date.getMonth() + 1),
      'dd', pad(date.getDate()),
      'd', date.getDate(),
      'hh', pad(date.getHours()),
      'mm', pad(date.getMinutes()),
      'ss', pad(date.getSeconds())
    ];

    const length = tokens.length;
    for (let i = 0; i &lt; length;) {
      format = format.replace(tokens[i++], tokens[i++]);
    }
  }

  return format;
};

/**
 * Parses given date &lt;code>str&lt;/code> according to given &lt;code>format&lt;/code>.
 * @param {string} str The date string to be parsed.
 * @param {string} format The date format.
 * @return {?Date} The parsed date.
 * @example
 * parseDate('2013-01-31', 'YYYY-MM-dd');
 * parseDate('2013-01-31 20:30', 'YYYY-MM-dd hh:mm');
 * parseDate('03 Jan, 2013', 'dd MMM, YYYY');
 */
export const parseDate = (str, format) => {
  const re = /[\/\s,\.\:\-]/;
  const dateParts = str.split(re);
  const formatParts = format.split(re);
  const map = {};

  for (let i = 0; i &lt; Math.min(dateParts.length, formatParts.length); ++i) {
    const key = formatParts[i];
    if (key) map[key] = dateParts[i];
  }

  const year = +(map['YYYY'] || '20' + map['YY']);
  let month = +(map['MM'] || 0) - 1;
  if (map['MMMM'] || map['MMM']) {
    month = getMonthByName(map['MMMM'] || map['MMM']);
  }

  return month >= 0 &amp;&amp; +map['dd'] &lt; 32 ?
      new Date(
        year, month, +map['dd'], 
        +map['hh'] || 0, +map['mm'] || 0, +map['ss'] || 0) :
      null;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#capitalize">capitalize</a></li><li><a href="global.html#clear">clear</a></li><li><a href="global.html#compress">compress</a></li><li><a href="global.html#contains">contains</a></li><li><a href="global.html#decompress">decompress</a></li><li><a href="global.html#formatBytes">formatBytes</a></li><li><a href="global.html#formatDate">formatDate</a></li><li><a href="global.html#formatNumber">formatNumber</a></li><li><a href="global.html#FORMATS">FORMATS</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getCharset">getCharset</a></li><li><a href="global.html#getContext">getContext</a></li><li><a href="global.html#getCookies">getCookies</a></li><li><a href="global.html#getCount">getCount</a></li><li><a href="global.html#getDocument">getDocument</a></li><li><a href="global.html#getLocale">getLocale</a></li><li><a href="global.html#getMonthByName">getMonthByName</a></li><li><a href="global.html#getMonthName">getMonthName</a></li><li><a href="global.html#getMonthNames">getMonthNames</a></li><li><a href="global.html#getParameter">getParameter</a></li><li><a href="global.html#getParameterMap">getParameterMap</a></li><li><a href="global.html#getParameterNames">getParameterNames</a></li><li><a href="global.html#getQueryString">getQueryString</a></li><li><a href="global.html#getWeekDate">getWeekDate</a></li><li><a href="global.html#getWeekNames">getWeekNames</a></li><li><a href="global.html#getWeekNumber">getWeekNumber</a></li><li><a href="global.html#hash">hash</a></li><li><a href="global.html#keys">keys</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#loadScript">loadScript</a></li><li><a href="global.html#LZW">LZW</a></li><li><a href="global.html#NUMBER_FORMAT">NUMBER_FORMAT</a></li><li><a href="global.html#ordinal">ordinal</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#parseDate">parseDate</a></li><li><a href="global.html#random">random</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#roundNumber">roundNumber</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#toAmPmTime">toAmPmTime</a></li><li><a href="global.html#toArray">toArray</a></li><li><a href="global.html#toQueryString">toQueryString</a></li><li><a href="global.html#TYPE">TYPE</a></li><li><a href="global.html#uuid4">uuid4</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Apr 15 2021 00:01:47 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
