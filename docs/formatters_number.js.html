<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: formatters/number.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: formatters/number.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Number format library.
 *
 * @see https://google.github.io/styleguide/javascriptguide.xml
 * @see https://developers.google.com/closure/compiler/docs/js-for-compiler
 */


/**
 * Formats given number according to given options.
 * @param {number} number The number to be formatted.
 * @param {!Object&lt;string, *>=} opt_options Formatting options.
 * @return {string} The formatted number string.
 * @example
 * formatNumber(100);   // 100
 * formatNumber(1000);  // 1,000
 * formatNumber(1500);  // 1,500
 * formatNumber(10000); // 10,000
 * formatNumber(1e6);   // 1,000,000
 * const options = {'prefix': '$'};
 * formatNumber(100, options);   // $100
 * formatNumber(1e6, options);   // $1,000,000
 */
export const formatNumber = (number, opt_options) => {
  const options = getOptions_(opt_options);
  const result = (options['fraction'] ? 
      number.toFixed(options['fraction']) :
      '' + number).split('.');

  return options['prefix'] +
      result[0].replace(/\B(?=(\d{3})+(?!\d))/g,
      /** @type {string} */ (options['grouping'])) +
      (result[1] ? options['decimal'] + result[1] : '') +
      options['suffix'];
};

/**
 * Rounds given number.
 * @param {number} number The number to be rounded.
 * @param {!Object&lt;string, *>=} opt_options Formatting options.
 * @return {string} The rounded number string.
 * @example
 * roundNumber(100);   // 100
 * roundNumber(1000);  // 1k
 * roundNumber(1500);  // 1.5k
 * roundNumber(10000); // 10k
 * roundNumber(1e6);   // 10m
 * const options = {'prefix': '$'};
 * roundNumber(100, options);   // $100
 * roundNumber(1e6, options);   // $10m
 */
export const roundNumber = (number, opt_options) => {
  const options = getOptions_(opt_options);
  // parseInt(number, 10) == ~~number
  const base = (~~number + '').length - (number &lt; 0 ? 2 : 1);
  const length = ~~(base / 3) * 3;
  let divider = 1;

  for (let i = 0; i &lt; length; ++i) {
    divider *= 10;
  }

  const delta = number / divider;
  const a = ~~delta;
  const b = delta.toFixed(2 - base % 3);

  const result = (a == b ? a : b) + ['', 'k', 'm', 'g', 't'][~~(base / 3)];
  return options['prefix'] + result + options['suffix'];
};

/**
 * Gets the ordinal suffix for a number.
 * @param {number} number The number.
 * @return {string} Returns the ordinal suffix for a number.
 */
export const ordinal = (number) => {
  const index = (
      number = ~~(number &lt; 0 ? -number : number) % 100) > 10 &amp;&amp;
      number &lt; 14 || (number %= 10) > 3 ? 0 : number;

  return ['th', 'st', 'nd', 'rd'][index];
};

/**
 * @param {!Object&lt;string, *>} options Formatting options.
 * @return {!Object&lt;string, *>} Returns formatting options.
 * @private
 */
const getOptions_ = (options = {}) => {
  for (let key in defaults_) {
    if (!(key in options)) {
      options[key] = defaults_[key];
    }
  }
  return options;
};

/**
 * Default formatting options.
 * @type {!Object&lt;string, *>}
 * @private
 */
const defaults_ = {
  'decimal': '.',
  'grouping': ',',
  'fraction': 0,
  'prefix': '',
  'suffix': ''
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#capitalize">capitalize</a></li><li><a href="global.html#clear">clear</a></li><li><a href="global.html#compress">compress</a></li><li><a href="global.html#contains">contains</a></li><li><a href="global.html#decompress">decompress</a></li><li><a href="global.html#formatBytes">formatBytes</a></li><li><a href="global.html#formatDate">formatDate</a></li><li><a href="global.html#formatNumber">formatNumber</a></li><li><a href="global.html#FORMATS">FORMATS</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getCharset">getCharset</a></li><li><a href="global.html#getContext">getContext</a></li><li><a href="global.html#getCookies">getCookies</a></li><li><a href="global.html#getCount">getCount</a></li><li><a href="global.html#getDocument">getDocument</a></li><li><a href="global.html#getLocale">getLocale</a></li><li><a href="global.html#getMonthByName">getMonthByName</a></li><li><a href="global.html#getMonthName">getMonthName</a></li><li><a href="global.html#getMonthNames">getMonthNames</a></li><li><a href="global.html#getParameter">getParameter</a></li><li><a href="global.html#getParameterMap">getParameterMap</a></li><li><a href="global.html#getParameterNames">getParameterNames</a></li><li><a href="global.html#getQueryString">getQueryString</a></li><li><a href="global.html#getWeekDate">getWeekDate</a></li><li><a href="global.html#getWeekNames">getWeekNames</a></li><li><a href="global.html#getWeekNumber">getWeekNumber</a></li><li><a href="global.html#hash">hash</a></li><li><a href="global.html#keys">keys</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#loadScript">loadScript</a></li><li><a href="global.html#LZW">LZW</a></li><li><a href="global.html#NUMBER_FORMAT">NUMBER_FORMAT</a></li><li><a href="global.html#ordinal">ordinal</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#parseDate">parseDate</a></li><li><a href="global.html#random">random</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#roundNumber">roundNumber</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#toAmPmTime">toAmPmTime</a></li><li><a href="global.html#toArray">toArray</a></li><li><a href="global.html#toQueryString">toQueryString</a></li><li><a href="global.html#TYPE">TYPE</a></li><li><a href="global.html#uuid4">uuid4</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Apr 15 2021 00:01:47 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
